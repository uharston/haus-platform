---
import { sanityClient } from "sanity:client";
import type { AstroSeoProps } from "@astrolib/seo";
import MarkdownPostLayout from "@layouts/MarkdownPostLayout.astro";
import { getAllPosts } from "@/sanity/queries/posts";

export async function getStaticPaths() {
	const blogEntries = await getAllPosts(sanityClient)

	return blogEntries.map((entry) => {
		return { params: { slug: entry._id }, props: entry };
	});
}

const entry = Astro.props;

const seo: AstroSeoProps = {
	title: entry.title,
	description: entry.description,
	canonical: `https://mintaka.co/it/blog/${entry._id}/`,
	openGraph: {
		url: entry._id,
		title: entry.title,
		description: entry.description,
		images: [
			{
				url: "https://mintaka.co/opengraph/social-og.jpg",
				width: 1200,
				height: 630,
				alt: "Social open graph",
				type: "image/jpeg",
			},
			{
				url: "https://mintaka.co/opengraph/twitter-og.jpg",
				width: 4096,
				height: 4096,
				alt: "Twitter open graph",
				type: "image/jpeg",
			},
			{ url: "https://mintaka.co/opengraph/social-og.jpg" },
			{ url: "https://mintaka.co/opengraph/twitter-og.jpg" },
		],
		site_name: "YourSitesName",
	},
	twitter: {
		handle: "@TwitterHandle",
		site: "@site",
		cardType: "summary_large_image",
	},
};
---

<MarkdownPostLayout frontmatter={entry} content={entry.content} seo={seo} />
